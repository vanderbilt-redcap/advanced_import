"use strict";(("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]=("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]||[]).push([[710],{710:function(t,e,s){s.r(e),s.d(e,{default:function(){return b}});var i=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wizard"},[e("FilePreview"),e("b-card",{staticClass:"mt-2"},[e("b-tabs",{staticClass:"wizard-tabs",attrs:{"no-nav-style":"","content-class":"mt-0"},model:{value:t.step_index,callback:function(e){t.step_index=e},expression:"step_index"}},t._l(t.steps,(function(s,i){return e("b-tab",{key:i,attrs:{title:"","title-link-class":"d-none"}},[e("div",{staticClass:"steps text-center mb-2"},[e("b-badge",{attrs:{variant:"light"}},[t._v("Step "+t._s(t.step_index+1)+" of "+t._s(t.steps.length))])],1),e(s.element,{tag:"component",scopedSlots:t._u([{key:"left",fn:function(){return[t.step_index>0?e("button",{staticClass:"btn btn-outline-primary",attrs:{disabled:0==t.step_index},on:{click:t.goToPrevStep}},[t._v("go back")]):e("span")]},proxy:!0},{key:"default",fn:function(){},proxy:!0},{key:"right",fn:function({validation:s,processFunction:i}){return[e("button",{directives:[{name:"show",rawName:"v-show",value:t.step_index<t.steps.length-1,expression:"step_index<(steps.length-1)"}],staticClass:"btn btn-outline-primary",attrs:{disabled:s.$invalid},on:{click:function(e){return t.goToNextStep(i)}}},[t._v("next")])]}}],null,!0)})],1)})),1)],1)],1)},n=[],a=function(){var t=this,e=t._self._c;return e("div",[t.items_proxy&&t.items_proxy.length>0?e("b-card",{staticClass:"mt-2",attrs:{id:"table-container",title:t.title}},[e("b-table",{attrs:{id:"my-table",items:t.items_proxy,small:"",bordered:"",striped:"",hover:"",thClass:"th-head"},scopedSlots:t._u([{key:"head()",fn:function(s){return[e("section",[e("span",{staticClass:"d-block small",attrs:{title:"REDCap field"}},[e("non-blank-space"),Boolean(t.getRedcapField(s.column))?e("b-badge",{attrs:{variant:"info"}},[e("span",[t._v(t._s(t.getRedcapField(s.column)))]),t.isPrimaryKey(s.column)?e("font-awesome-icon",{staticClass:"ml-1 text-warning",attrs:{icon:"star",title:"primary key","fixed-width":""}}):t.isDynamic(s.column)?e("font-awesome-icon",{staticClass:"ml-1 text-danger",attrs:{icon:"level-down-alt",title:"dynamic","fixed-width":""}}):e("font-awesome-icon",{staticClass:"ml-1 text-secondary",attrs:{icon:"check-circle",title:"standard","fixed-width":""}})],1):t._e()],1),e("span",{staticClass:"d-block small",attrs:{title:"CSV column"}},[t._v(t._s(s.column))])])]}}],null,!1,95129129)})],1):t._e()],1)},l=[],r=s(629),o={data(){return{}},computed:{...(0,r.rn)({items:t=>t.csv_data.data,csvFields:t=>t.csv_data.fields,total_lines:t=>t.csv_data.total_lines,counting:t=>t.csv_data.counting,files:t=>t.import_settings.files,mapping:t=>t.import_settings.mapping,dynamic_fields:t=>t.import_settings.dynamic_fields}),title(){let t="Preview";if(this.files&&this.files.name){let{name:e=!1}=this.files;e&&(t=`${e} (preview)`)}return t},items_proxy(){let t=this.files;if(!t){const t=[...Array(5).keys()].map((()=>({"no data":""})));return t}return this.items}},destroyed(){this.$store.dispatch("csv_data/stopCounting")},methods:{formatNumber(t){return new Intl.NumberFormat("en-US",{}).format(t)},getRedcapField(t){const e={...this.mapping},s=this.csvFields.indexOf(t);for(let[i,n]of Object.entries(e))if(Object.values(n).indexOf(s)>=0)return i},isDynamic(t){const e=this.getRedcapField(t);return!!e&&this.dynamic_fields.indexOf(e)>=0},isPrimaryKey(t){const e=this.getRedcapField(t);if(!e)return!1;const{primary_key:s}={...this.$store.state.import_settings};return e==s}},watch:{}},d=o,c=s(3736),p=(0,c.Z)(d,a,l,!1,null,"00265252",null),m=p.exports;const u=[{element:()=>s.e(513).then(s.bind(s,5513))},{element:()=>Promise.all([s.e(137),s.e(109)]).then(s.bind(s,4805))},{element:()=>Promise.all([s.e(762),s.e(159)]).then(s.bind(s,6243))},{element:()=>Promise.all([s.e(226),s.e(678)]).then(s.bind(s,9678))},{element:()=>s.e(959).then(s.bind(s,9959))},{element:()=>s.e(255).then(s.bind(s,1255))},{element:()=>s.e(756).then(s.bind(s,6756))},{element:()=>s.e(994).then(s.bind(s,3994))}];var h={components:{FilePreview:m},data(){return{step_index:0,steps:u,processing:!1}},created(){this.step=this.steps[0]},destroyed(){this.$store.dispatch("import_settings/reset"),this.$store.dispatch("csv_data/reset")},methods:{goToPrevStep(){let t=this.step_index;--t<=0&&(t=0),this.step_index=t},async goToNextStep(t){if(t&&"function"==typeof t){const e=await t();if(!e)throw new Error("error going to next step")}let e=this.step_index;++e>=this.steps.length&&(e=this.steps.length-1),this.step_index=e}}},f=h,_=(0,c.Z)(f,i,n,!1,null,"24c7e0bd",null),b=_.exports}}]);
//# sourceMappingURL=advanced_import.umd.min.710.js.map