"use strict";(("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]=("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]||[]).push([[162],{1166:function(e,t,r){r.d(t,{Z:function(){return v}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.processing?r("div",[r("b-progress",{attrs:{max:e.max,"show-progress":"",animated:!1,variant:"primary",size:"sm"}},[r("b-progress-bar",{attrs:{value:e.progress,label:(100*e.progress).toFixed(2)+"%"}})],1),r("div",{staticClass:"text-muted small"},[e.uploaded_bytes&&e.uploaded_bytes>0?r("span",[e._v("uploaded "+e._s(e.formatBytes(e.uploaded_bytes))+" of "+e._s(e.formatBytes(e.file_size)))]):e._e(),r("non-blank-space")],1)],1):e._e(),e._e()])},s=[],a=r(2697),i=r(7742),o=(r(5666),r(8309),r(2222),r(7042),r(5822)),u=r(8796),l=1024e3,c=512e4,d=20,p={data:function(){return{cancel:null,content:"",start:0,end:0,max:1,processing:!1,paused:!1,abort:!1,remote_file_name:null,progress:0,uploaded_bytes:0,file_size:0,formatBytes:u.td}},props:{files:{type:[File,Array],default:function(){return[]}}},computed:{file:function(){var e,t=this.files;return"object"===(0,i.Z)(t)?e=t:Array.isArray(t)&&t.length>0&&(e=t[0]),e?new File([e],e.name):null},chunk_size:function(){return this.calcChunkSize(this.file)},processed:function(){var e=this.uploaded_bytes||0,t=this.file_size||0,r=(0,u.td)(e),n=(0,u.td)(t);return"".concat(r,"/").concat(n)}},destroyed:function(){this.stop()},methods:{processChunk:function(e,t){var r=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var s,a,i,o,u,l,c,d,p,f,h,m,v;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!r.abort){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.sendChunk(e,t);case 5:if(s=n.sent,a=s.data,i=a.uploaded_bytes,o=a.file_size,a){n.next=10;break}throw new Error("no response");case 10:if(u=r.updateProgress(i,o),r.$emit("progress",{file:e,progress:u,response:s}),r.start=r.end,l=a.unique_name,l&&r.updateUniqueFileName(l),r.paused||!(r.end<e.size)){n.next=19;break}return n.abrupt("return",r.upload());case 19:return r.reset(),c={component:r,file_name:r.remote_file_name},r.$emit("completed",c),n.abrupt("return",c);case 23:n.next=32;break;case 25:n.prev=25,n.t0=n["catch"](0),d=n.t0.response,p=void 0===d?{}:d,f=p.data,h=void 0===f?{}:f,m=h.message,v=void 0===m?"":m,r.$emit("error",{message:v,file:e,error:n.t0}),r.reset();case 32:case"end":return n.stop()}}),n,null,[[0,25]])})))()},calculateProgress:function(e,t){try{var r=t/e.size;return t<0?0:t>e.size?1:r}catch(n){return 0}},sendChunk:function(e,t){var r=this.$API.dispatch("upload/upload",e,t);return this.cancel=r.cancel,r},calcChunkSize:function(e){if(!e)return l;var t=e.size,r=void 0===t?0:t,n=r/d;return n<l?l:n>c?c:n},updateProgress:function(e,t){if(this.uploaded_bytes=e,this.file_size=t,!isNaN(e)&&!isNaN(t)&&!(t<=0)){var r=e/t;return this.progress=r,r}},upload:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.file){t.next=2;break}return t.abrupt("return");case 2:return r=e.file,e.processing=!0,e.paused=!1,e.end=e.start+e.chunk_size+1,n=r.slice(e.start,e.end),s=new o.Z,t.next=10,s.readAsDataURLAsync(n);case 10:return a=t.sent,t.abrupt("return",e.processChunk(r,a));case 12:case"end":return t.stop()}}),t)})))()},stop:function(){"function"===typeof this.cancel&&this.cancel(),this.abort=!0},onPause:function(){this.processing=!1,this.paused=!0},updateUniqueFileName:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.file.unique_name||(this.file.unique_name=e,this.remote_file_name=e)},reset:function(){var e=this;setTimeout((function(){e.cancel=null,e.start=0,e.end=0,e.processing=!1,e.paused=!1,e.abort=!1}),1e3)}}},f=p,h=r(3736),m=(0,h.Z)(f,n,s,!1,null,null,null),v=m.exports},6162:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("FileUploader",{ref:"uploader",attrs:{files:e.files}}),r("b-form-file",{ref:"file",attrs:{id:"file","DISABLED-state":"Boolean(files)",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here...",accept:e.accept},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),r("b-button",{on:{click:e.upload}},[e._v("upload")]),r("div",{staticClass:"d-flex flex-row justify-content-center align-items-center"},[r("b-card",{attrs:{title:"This is a test","img-src":e.cat},scopedSlots:e._u([{key:"header",fn:function(){return[r("h6",{staticClass:"mb-0"},[e._v("Header Slot")])]},proxy:!0},{key:"footer",fn:function(){return[r("h6",{staticClass:"mb-0"},[e._v("Footer Slot")])]},proxy:!0}])},[r("b-card-text",[e._v(" This is a test ")])],1)],1)],1)},s=[],a=r(5349),i=r(1166),o={components:{FileUploader:i.Z},data:function(){return{cat:a,files:null,progress:0,max:100,uploading:!1,completed:!1}},computed:{},methods:{onUploadCompleted:function(){console.log(arguments)},upload:function(){var e=arguments,t=this.$refs.uploader;return t.$on("completed",(function(){console.log(e)})),t.$on("error",(function(e){var t=e.message,r=e.file,n=e.error;console.log({message:t,file:r,error:n})})),t.upload()}}},u=o,l=r(3736),c=(0,l.Z)(u,n,s,!1,null,null,null),d=c.exports},5349:function(e,t,r){e.exports=r.p+"img/crying-cat.99949377.jpg"}}]);
//# sourceMappingURL=advanced_import.umd.min.162.js.map