"use strict";(("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]=("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]||[]).push([[255],{1255:function(e,t,i){i.r(t),i.d(t,{default:function(){return k}});var s=function(){var e=this,t=e._self._c;return t("div",[t("p",[e._v("The wizard guessed the mapping for you but you can adjust the mapping as needed and select the dynamic fields.")]),t("table",{staticClass:"table table-striped table-bordered"},[t("thead",[t("tr",[t("th",{staticClass:"text-nowrap"},[e._v("Dynamic "),t("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-dynamic-fields",modifiers:{"modal-dynamic-fields":!0}}],attrs:{size:"sm",variant:"outline-info"}},[t("font-awesome-icon",{staticClass:"icon",attrs:{icon:["fas","question-circle"]}})],1)],1),t("th",[e._v("Destination Field (REDCap)")]),t("th",[e._v("Source Field (CSV file)")])])]),t("tbody",e._l(e.form_fields,(function(i,s){return t("tr",{key:s},[t("td",{staticClass:"min text-right"},[i.field_name!==e.primary_key?t("b-form-checkbox",{attrs:{disabled:!e.hasMapping(i.field_name),checked:e.isDynamic(i.field_name),switch:""},on:{input:function(t){return e.onDynamicToggle(i.field_name,t)}}}):e._e()],1),t("td",[t("span",{staticClass:"d-flex flex-row align-items-center"},[t("span",{staticClass:"font-weight-bold"},[e._v(e._s(i.field_name))]),i.field_name===e.primary_key?t("font-awesome-icon",{staticClass:"icon text-warning ml-1",attrs:{title:"primary key",icon:["fas","star"]}}):e._e()],1),t("span",{staticClass:"small",domProps:{innerHTML:e._s(i.element_label)}})]),t("td",["checkbox"==i.element_type?[t("CsvFieldsDropDown",{attrs:{redcapFieldName:i.field_name,redcapFieldType:i.element_type}})]:[t("CsvFieldsSingleSelect",{attrs:{redcapFieldName:i.field_name}})]],2)])})),0)]),t("b-modal",{attrs:{id:"modal-dynamic-fields",title:"Dynamic fields","ok-only":""}},[t("div",{staticClass:"my-4"},[t("p",[e._v('Mark as "dynamic" the fields that are not relevant in determining the uniqueness of an entry (i.e. can be different compared to existing data).')]),t("p",[e._v('If you are importing "medications" in a repeated form, for example, you may want to mark the "status" field as dynamic since it could have changed since the previous import.')]),t("p",[e._v("Dynamic fields will be ignored when the wizard will try to determine the uniqueness of a row.")])])]),t("p",[e._v("Remember to map the primary key to proceed.")]),t("div",{staticClass:"buttons d-flex flex-row justify-content-between"},[e._t("left"),e._t("default"),e._t("right",null,{validation:e.$v})],2)],1)},n=[],a=(i(7658),function(){var e=this,t=e._self._c;return t("b-container",e._l(e.checkboxOptions,(function(i,s){return t("b-row",{key:s,staticClass:"d-flex flex-column option"},[t("b-col",{staticClass:"small"},[t("span",[e._v("["+e._s(s)+"]:")]),t("span",{staticClass:"ml-1"},[e._v(e._s(i))])]),t("b-col",{},[t("CsvFieldsSingleSelect",{attrs:{redcapFieldName:e.redcapFieldName,fieldIndex:s}})],1)],1)})),1)}),r=[],d=function(){var e=this,t=e._self._c;return t("div",[t("b-dropdown",{staticClass:"w-100",attrs:{text:"Dropdown Button",variant:e.hasMapping?"success":"outline-primary",lazy:""},scopedSlots:e._u([{key:"button-content",fn:function(){return[t("span",[e._v(e._s(e.selectedText))])]},proxy:!0}])},[t("b-dropdown-item",{attrs:{active:e.skip},on:{click:function(t){return e.onChange(null)}}},[e._v("-- skip --")]),e._l(e.csv_fields,(function(i,s){return t("b-dropdown-item",{key:s,attrs:{disabled:!e.isMapped(s)&&e.isMappedElsewhere(s),active:e.isMapped(s)},on:{click:function(t){return e.onChange(s)}}},[t("span",[e._v(e._s(i))])])}))],2)],1)},l=[],o=i(629),c={data(){return{}},computed:{...(0,o.rn)({csv_fields:e=>e.csv_data.fields,mapping:e=>e.import_settings.mapping}),options(){const e=this.csv_fields,t=[],i={value:null,text:"-- skip --"};t.push(i);for(let s in e){const i={value:s,text:e[s]};t.push(i)}return t},csvIndexes(){return this.$store.getters["import_settings/mappedCsvFields"](this.redcapFieldName)},selectedText(){const e="--- skip ---",t=this.csvIndexes;if(t.length<1)return e;const i=t[this.fieldIndex];return Number.isInteger(i)?this.csv_fields[i]:e},skip(){return!Array.isArray(this.csvIndexes)||!Number.isInteger(this.csvIndexes[this.fieldIndex])},hasMapping(){return Number.isInteger(this.csvIndexes[this.fieldIndex])}},props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""},fieldIndex:{type:[Number,String],default:0}},methods:{isMappedElsewhere(e){const t={...this.mapping};for(let[i,s={}]of Object.entries(t))if(i==this.redcapFieldName){let t=Object.values(s).filter(((t,i)=>i!=e));if(t.indexOf(e)>=0)return!0}else if(Object.values(s).indexOf(e)>=0)return!0;return!1},isMapped(e){return this.csvIndexes[this.fieldIndex]==e},onChange(e){const t=this.redcapFieldName,i=e,s=this.fieldIndex;this.$store.dispatch("import_settings/setFieldMapping",{fieldName:t,csvIndex:i,fieldIndex:s})}}},p=c,m=i(3736),f=(0,m.Z)(p,d,l,!1,null,"275dd28e",null),u=f.exports,h={components:{CsvFieldsSingleSelect:u},computed:{checkboxOptions(){const e=this.$store.getters["settings/checkboxFieldOptions"](this.redcapFieldName);return e}},props:{redcapFieldName:{type:String,default:""},redcapFieldType:{type:String,default:""}},methods:{}},_=h,y=(0,m.Z)(_,a,r,!1,null,"0c8532ff",null),g=y.exports,v={components:{CsvFieldsDropDown:g,CsvFieldsSingleSelect:u},data(){return{}},computed:{...(0,o.rn)({csv_fields:e=>e.csv_data.fields,primary_key:e=>e.import_settings.primary_key,mapping:e=>e.import_settings.mapping,dynamic_fields:e=>e.import_settings.dynamic_fields}),form_fields(){const{form_name:e}=this.$store.state.import_settings,t=this.primary_key,i=this.$store.getters["settings/mappable_fields"](e,t);return i}},methods:{onDynamicToggle(e,t){this.$store.dispatch("import_settings/toggleDynamicField",{field:e,checked:t})},hasMapping(e){const t=this.$store.getters["import_settings/mappedCsvFields"](e);return Object.values(t).length>0},isDynamic(e){return this.dynamic_fields.indexOf(e)>=0}},validations(){const e=e=>{const t=[];for(let[i,s={}]of Object.entries(e))Object.values(s).length>0&&t.push(i);return t};return{mapping:{required(t){const i=e(t);return i.length>0},primaryKeyIsMapped(t){const i=e(t),s=this.primary_key;return i.includes(s)}}}}},b=v,x=(0,m.Z)(b,s,n,!1,null,"524a07fe",null),k=x.exports}}]);
//# sourceMappingURL=advanced_import.umd.min.255.js.map