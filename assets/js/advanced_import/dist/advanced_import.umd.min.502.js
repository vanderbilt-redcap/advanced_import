"use strict";(("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]=("undefined"!==typeof self?self:this)["webpackChunkadvanced_import"]||[]).push([[502],{8101:function(e,t,r){r.d(t,{Z:function(){return v}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.processing?r("div",[r("b-progress",{attrs:{max:e.max,"show-progress":"",animated:!1,variant:"primary",size:"sm"}},[r("b-progress-bar",{attrs:{value:e.progress,label:(100*e.progress).toFixed(2)+"%"}})],1),r("div",{staticClass:"text-muted small"},[e.uploaded_bytes&&e.uploaded_bytes>0?r("span",[e._v("uploaded "+e._s(e.formatBytes(e.uploaded_bytes))+" of "+e._s(e.formatBytes(e.file_size)))]):e._e(),r("non-blank-space")],1)],1):e._e(),e._e()])},s=[],a=r(2697),i=r(7742),o=r(4596),u=(r(5666),r(8309),r(2222),r(7042),r(5822)),l=r(8796),c=1024e3,d=512e4,p=20,f=function e(t){var r=t.file_size,n=t.name,s=t.percentage,a=t.progress,i=t.unique_name,u=t.uploaded_bytes,l=t.written_bytes;(0,o.Z)(this,e),this.file_size=r,this.name=n,this.percentage=s,this.progress=a,this.unique_name=i,this.uploaded_bytes=u,this.written_bytes=l},h={data:function(){return{cancel:null,content:"",start:0,end:0,max:1,processing:!1,paused:!1,abort:!1,remote_file_name:null,progress:0,uploaded_bytes:0,file_size:0,formatBytes:l.td}},props:{files:{type:[File,Array],default:function(){return[]}}},computed:{file:function(){var e,t=this.files;return"object"===(0,i.Z)(t)?e=t:Array.isArray(t)&&t.length>0&&(e=t[0]),e?new File([e],e.name):null},chunk_size:function(){return this.calcChunkSize(this.file)},processed:function(){var e=this.uploaded_bytes||0,t=this.file_size||0,r=(0,l.td)(e),n=(0,l.td)(t);return"".concat(r,"/").concat(n)}},destroyed:function(){this.stop()},methods:{processChunk:function(e,t){var r=this;return(0,a.Z)(regeneratorRuntime.mark((function n(){var s,a,i,o,u,l,c,d,p;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,!r.abort){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,r.sendChunk(e,t);case 5:if(s=n.sent,a=s.data,a){n.next=9;break}throw new Error("no response");case 9:if(i=new f(a),r.updateMetadata(i),r.$emit("progress",{file:e,metadata:i}),r.start=r.end,r.paused||!(r.end<e.size)){n.next=17;break}return n.abrupt("return",r.upload());case 17:return r.reset(),r.$emit("completed",i),n.abrupt("return",i);case 20:n.next=29;break;case 22:n.prev=22,n.t0=n["catch"](0),o=n.t0.response,u=void 0===o?{}:o,l=u.data,c=void 0===l?{}:l,d=c.message,p=void 0===d?"":d,r.$emit("error",{message:p,file:e,error:n.t0}),r.reset();case 29:case"end":return n.stop()}}),n,null,[[0,22]])})))()},calculateProgress:function(e,t){try{var r=t/e.size;return t<0?0:t>e.size?1:r}catch(n){return 0}},sendChunk:function(e,t){var r=this.$API.dispatch("upload/upload",e,t);return this.cancel=r.cancel,r},calcChunkSize:function(e){if(!e)return c;var t=e.size,r=void 0===t?0:t,n=r/p;return n<c?c:n>d?d:n},updateMetadata:function(e){var t=e.file_size,r=e.progress,n=e.unique_name,s=e.uploaded_bytes;return this.file.unique_name=n,this.remote_file_name=n,this.uploaded_bytes=s,this.file_size=t,this.progress=r,r},upload:function(){var e=this;return(0,a.Z)(regeneratorRuntime.mark((function t(){var r,n,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.file){t.next=2;break}return t.abrupt("return");case 2:return r=e.file,e.processing=!0,e.paused=!1,e.end=e.start+e.chunk_size+1,n=r.slice(e.start,e.end),s=new u.Z,t.next=10,s.readAsDataURLAsync(n);case 10:return a=t.sent,t.abrupt("return",e.processChunk(r,a));case 12:case"end":return t.stop()}}),t)})))()},stop:function(){"function"===typeof this.cancel&&this.cancel(),this.abort=!0},onPause:function(){this.processing=!1,this.paused=!0},reset:function(){var e=this;setTimeout((function(){e.cancel=null,e.start=0,e.end=0,e.processing=!1,e.paused=!1,e.abort=!1}),1e3)}}},m=h,_=r(3736),b=(0,_.Z)(m,n,s,!1,null,null,null),v=b.exports},2502:function(e,t,r){r.r(t),r.d(t,{default:function(){return d}});var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("FileUploader",{ref:"uploader",attrs:{files:e.files}}),r("b-form-file",{ref:"file",attrs:{id:"file","DISABLED-state":"Boolean(files)",placeholder:"Choose a file or drop it here...","drop-placeholder":"Drop file here..."},model:{value:e.files,callback:function(t){e.files=t},expression:"files"}}),r("b-button",{on:{click:e.upload}},[e._v("upload")]),r("div",{staticClass:"d-flex flex-row justify-content-center align-items-center"},[r("b-card",{attrs:{title:"This is a test","img-src":e.cat},scopedSlots:e._u([{key:"header",fn:function(){return[r("h6",{staticClass:"mb-0"},[e._v("Header Slot")])]},proxy:!0},{key:"footer",fn:function(){return[r("h6",{staticClass:"mb-0"},[e._v("Footer Slot")])]},proxy:!0}])},[r("b-card-text",[e._v(" This is a test ")])],1)],1)],1)},s=[],a=r(5349),i=r(8101),o={components:{FileUploader:i.Z},data:function(){return{cat:a,files:null,progress:0,max:100,uploading:!1,completed:!1}},computed:{},methods:{onUploadCompleted:function(){console.log(arguments)},upload:function(){var e=arguments,t=this.$refs.uploader;return t.$on("completed",(function(){console.log(e)})),t.$on("error",(function(e){var t=e.message,r=e.file,n=e.error;console.log({message:t,file:r,error:n})})),t.upload()}}},u=o,l=r(3736),c=(0,l.Z)(u,n,s,!1,null,null,null),d=c.exports},5349:function(e,t,r){e.exports=r.p+"img/crying-cat.99949377.jpg"}}]);
//# sourceMappingURL=advanced_import.umd.min.502.js.map